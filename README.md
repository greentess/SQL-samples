# SQL-samples
Набор SQL-запросов для базы данных "Книжный магазин"

### Постановка задачи: 
   В базе данных «Книжные магазины» накапливается информация по реализации  книг и других товаров через сеть книжных магазинов, состоящую из нескольких книжных магазинов, расположенных в нескольких городах России. Каждый товар имеет издательство (поставщика), текущую цену, год выпуска и описание. Если товар – книга, то он дополнительно имеет автора и тематику. В один чек может быть внесено несколько товаров. В зависимости от общей суммы покупки делается скидка по следующему правилу: от 1000 до 1999 р. – 10%, от 2000 до 2999 – 15%, более 3000 р. – 20%.
   Для этой базы данных используется модель «Снежинка». Центральным набором объектов является «Продажа». Она представляет собой слабую сущность, которая зависит от сущностей  «Чек», «Книга», «Покупатель» и «Продавец». В свою очередь, сущность «Книга» ссылается на измерения «Издательство», «Автор» и «Тематика», а сущность «Продавец» ссылается на сущность «Отделение», в котором он работает, а сущность «Отделение» ссылается на сущность «Книжный».
Связь между сущностями «Автор» и «Книга» многие-ко-многим, поскольку у каждой книги может быть два и более авторов, и, очевидно, что у каждого автора обычно более одной книги. Такая же ситуация с сущностями «Тематика» и «Книга»
![ERModel](https://github.com/greentess/SQL-samples2/blob/main/ER.jpg?raw=true)
По мере накопления оперативной информации возникает необходимость её анализа. У пользователей появляются вопросы:
### Задания: 
- Задание 1.
    - Выбор предметной области и бизнес-процесса.
    - Создание таблиц в SQL Server и диаграммы базы данных с помощью автоматизированных средств SQL Server «reverse engineering» (обратное проектирование).
- Задание 2.
    - Следует сгенерировать не менее 10 000 записей для оперативных данных и, по крайней мере, по 10-100 записей для остальных таблиц. Для генерации данных можно использовать хранимые процедуры, а также загружать данные из внешних источников.
- Задание 3.
    - Написать запрос, соединяющий все таблицы хранилища – с созданием представления и с записью полученных данных в новую таблицу. 
    - Написать не менее 5 разнообразных запросов для получения срезов куба, с применением группировок и агрегирующих функций. 
    - Написать хранимую процедуру для получения отдельной ячейки куба. 
    - Создать кросс-таблицу с помощью команды SELECT … PIVOT, а также сводную таблицу в MS EXCEL. Заодно создать на основе сводной таблицы диаграмму в EXCEL. 
- Задание 4.
    - Произвести очистку данных: написать запросы, которые находят пустые значения, неверные или неполные данные и, при необходимости, корректируют их. 
    - Написать запросы, которые преобразуют данные.
- Задание 5.
    - Загрузить данные в Deductor Studio из текстовых файлов, с созданием хранилища данных.
- Задание 6.
    - Применить к данным следующие методы интеллектуального анализа: xyz-анализ, abc-анализ и ассоциативные правила. 
